<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lab Test Report</title>
  <link rel="stylesheet" href="styles.css">
  <style>
    .report {
      background: white;
      padding: 20px;
      border: 1px solid #ddd;
      border-radius: 10px;
      width: 700px;
      margin: auto;
      margin-top: 30px;
    }
    .report h2 {
      text-align: center;
      color: #003366;
      margin-bottom: 20px;
    }
    .report p {
      margin: 5px 0;
      font-size: 16px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    table, th, td {
      border: 1px solid #ccc;
    }
    th, td {
      padding: 10px;
      text-align: center;
    }
    .print-btn {
      display: block;
      margin: 20px auto;
    }
  </style>
</head>
<body>
  <div class="report" id="report-container">
    <h2>Laboratory Test Report</h2>
    <p><b>Patient ID:</b> <span id="r-id"></span></p>
    <p><b>Name:</b> <span id="r-name"></span></p>
    <p><b>Age:</b> <span id="r-age"></span></p>
    <p><b>Gender:</b> <span id="r-gender"></span></p>
    <p><b>Doctor:</b> <span id="r-doctor"></span></p>
    <p><b>Date:</b> <span id="r-date"></span></p>

    <h3>Test Results</h3>
    <table id="test-results">
      <thead>
        <tr>
          <th>Test</th>
          <th>Result</th>
          <th>Normal Range</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <button class="print-btn" onclick="window.print()">Print Report</button>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      let reportData = JSON.parse(localStorage.getItem("reportData"));
      if (!reportData) {
        alert("No report data found!");
        window.location.href = "reception_dashboard.html";
        return;
      }

      document.getElementById("r-id").textContent = reportData.id;
      document.getElementById("r-name").textContent = reportData.name;
      document.getElementById("r-age").textContent = reportData.age;
      document.getElementById("r-gender").textContent = reportData.gender;
      document.getElementById("r-doctor").textContent = reportData.doctor;
      document.getElementById("r-date").textContent = reportData.date;

      let tbody = document.querySelector("#test-results tbody");
      reportData.tests.forEach(t => {
        let row = document.createElement("tr");
        row.innerHTML = `<td>${t.name}</td><td>${t.result}</td><td>${t.range}</td>`;
        tbody.appendChild(row);
      });
    });
  </script>
</body>
</html>
