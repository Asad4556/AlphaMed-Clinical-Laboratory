<!DOCTYPE html>
<html lang="ur">
<head>
  <meta charset="UTF-8">
  <title>Ø±Ù¾ÙˆØ±Ù¹Ø³ Ø¯ÛŒÚ©Ú¾ÛŒÚº</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="max-w-6xl mx-auto p-6">
    <h1 class="text-2xl font-bold mb-4">ğŸ“‹ Ù…Ø±ÛŒØ¶ Ø±Ù¾ÙˆØ±Ù¹Ø³</h1>

    <div id="reportList" class="space-y-4">
      <!-- Ø±Ù¾ÙˆØ±Ù¹Ø³ ÛŒÛØ§Úº Ø¢Û“ Ú¯ÛŒ -->
    </div>
  </div>

  <script>
    function loadReports() {
      const listContainer = document.getElementById("reportList");
      listContainer.innerHTML = "";

      const patients = JSON.parse(localStorage.getItem("registeredPatients") || "[]");

      if (patients.length === 0) {
        listContainer.innerHTML = "<p>ğŸš« Ú©ÙˆØ¦ÛŒ Ø±Ù¾ÙˆØ±Ù¹ Ø¯Ø³ØªÛŒØ§Ø¨ Ù†ÛÛŒÚºÛ”</p>";
        return;
      }

      patients.forEach((patient) => {
        const card = document.createElement("div");
        card.className = "bg-white p-4 rounded shadow";

        card.innerHTML = `
          <h2 class="text-xl font-semibold mb-2">${patient.name} (MRN: ${patient.mrn})</h2>
          <p><strong>CNIC:</strong> ${patient.cnic} | <strong>Sample#:</strong> ${patient.sampleNo}</p>
          <div class="mt-3 space-y-3">
            ${renderReport(patient.selectedTests)}
          </div>
        `;

        listContainer.appendChild(card);
      });
    }

    function renderReport(tests) {
      let html = "";
      tests.forEach((test) => {
        html += `<div class="border p-3 rounded">
          <strong>${test.name}</strong>
          <table class="w-full mt-2 border-t">
            <thead>
              <tr>
                <th class="text-left">Ù¾ÛŒØ±Ø§Ù…ÛŒÙ¹Ø±</th>
                <th class="text-left">Ù†ØªÛŒØ¬Û</th>
                <th class="text-left">Ø±ÛŒÙ†Ø¬</th>
                <th class="text-left">ÛŒÙˆÙ†Ù¹</th>
              </tr>
            </thead>
            <tbody>
              ${test.parameters.map((param) => `
                <tr>
                  <td>${param.name}</td>
                  <td>${param.result || "â³"}</td>
                  <td>${param.range}</td>
                  <td>${param.unit}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
        </div>`;
      });
      return html;
    }

    loadReports();
  </script>
</body>
</html>
