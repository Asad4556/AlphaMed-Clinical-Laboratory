<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Register Patient</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="p-4 bg-gray-100">
  <div class="max-w-xl mx-auto bg-white shadow-md rounded p-4">
    <h1 class="text-2xl font-bold mb-4">ğŸ“ Register Patient</h1>

    <!-- Patient Form -->
    <form id="patientForm">
      <!-- Name, CNIC, MRN, Phone etc... -->
      <!-- (Ø¢Ù¾ Ú©Û’ Ø¨Ø§Ù‚ÛŒ input fields ÛŒÛØ§Úº ÛÙˆÚº Ú¯Û’) -->

      <!-- Lab Section Dropdown -->
      <h2 class="font-semibold mb-2 mt-4">ğŸ”¬ Select Lab Sections & Tests</h2>

      <select id="departmentSelect" class="border rounded px-2 py-1 w-full mb-2">
        <option value="">-- Select Department --</option>
      </select>

      <select id="testSelect" class="border rounded px-2 py-1 w-full">
        <option value="">-- Select Test --</option>
      </select>

      <button type="submit" class="mt-4 px-4 py-2 bg-blue-600 text-white rounded">ğŸ’¾ Register</button>
    </form>
  </div>

  <!-- JS Scripts -->
  <script src="test-data.js"></script>
  <script>
    const departmentSelect = document.getElementById("departmentSelect");
    const testSelect = document.getElementById("testSelect");

    if (typeof labDepartments === "undefined") {
      console.error("âŒ labDepartments not loaded");
    } else {
      // Fill department dropdown
      labDepartments.forEach((dept, index) => {
        const option = document.createElement("option");
        option.value = index;
        option.textContent = dept.name;
        departmentSelect.appendChild(option);
      });

      // Change event
      departmentSelect.addEventListener("change", () => {
        testSelect.innerHTML = '<option value="">-- Select Test --</option>';
        const selectedIndex = departmentSelect.value;
        if (selectedIndex === "") return;

        const selectedDept = labDepartments[selectedIndex];
        selectedDept.tests.forEach(test => {
          const option = document.createElement("option");
          option.value = test.name;
          option.textContent = test.name;
          testSelect.appendChild(option);
        });
      });
    }
  </script>
</body>
</html>
